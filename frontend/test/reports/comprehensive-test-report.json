{
  "summary": {
    "totalTests": 0,
    "passed": 0,
    "failed": 0,
    "skipped": 0,
    "passRate": "NaN%",
    "duration": "22.72 秒",
    "startTime": "2025/12/25 16:24:45",
    "endTime": "2025/12/25 16:25:07"
  },
  "suiteDetails": [],
  "errorAnalysis": {
    "totalErrors": 4,
    "errorTypes": [
      {
        "type": "Command failed",
        "count": 4,
        "percentage": "100.00%"
      }
    ],
    "frequentErrors": [
      {
        "testName": "用户配置数据测试",
        "error": "Command failed: npx jest ./__tests__/config.test.js --config=./test/jest.config.js --verbose --json --outputFile=./test/results/用户配置数据测试.json\nFAIL test/__tests__/config.test.js\n  用户配置数据测试套件\n    配置数据存储和读取\n      ✕ 应该正确添加和读取基本配置 (11 ms)\n      ✓ 应该正确设置和获取活跃配置 (2 ms)\n    配置数据修改和一致性\n      ✓ 应该正确更新配置数据 (12 ms)\n      ✓ 修改配置后应保持数据完整性 (4 ms)\n    八字运算算法验证\n      ✓ 应该正确计算八字: 标准八字案例1 (5 ms)\n      ✓ 应该正确计算八字: 标准八字案例2 (10 ms)\n      ✕ 应该正确处理时辰计算 (5 ms)\n    边界条件和异常输入处理\n      ✕ 应该正确处理边界年龄数据 (1 ms)\n      ✓ 应该正确处理无效日期输入 (1 ms)\n      ✓ 应该正确处理缺少位置信息的情况 (1 ms)\n    性能测试\n      ✓ 批量操作应该保持良好性能 (1 ms)\n      ✓ 八字计算应该高效 (17 ms)\n\n  ● 用户配置数据测试套件 › 配置数据存储和读取 › 应该正确添加和读取基本配置\n\n    expect(received).toBeTruthy()\n\n    Received: false\n\n      111 |     test('应该正确添加和读取基本配置', async () => {\n      112 |       const result = await enhancedUserConfigManager.addBasicConfig(TEST_CONFIGS.basic);\n    > 113 |       expect(result).toBeTruthy();\n          |                      ^\n      114 |\n      115 |       const configs = enhancedUserConfigManager.getAllConfigs();\n      116 |       expect(configs.length).toBeGreaterThan(0);\n\n      at Object.<anonymous> (__tests__/config.test.js:113:22)\n\n  ● 用户配置数据测试套件 › 八字运算算法验证 › 应该正确处理时辰计算\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"子\"\n    Received: undefined\n\n      238 |       testTimes.forEach(({ time, expectedShichen }) => {\n      239 |         const shichen = getShichen(time);\n    > 240 |         expect(shichen.name).toBe(expectedShichen);\n          |                              ^\n      241 |       });\n      242 |     });\n      243 |   });\n\n      at forEach (__tests__/config.test.js:240:30)\n          at Array.forEach (<anonymous>)\n      at Object.<anonymous> (__tests__/config.test.js:238:17)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 用户配置数据测试套件 › 边界条件和异常输入处理 › 应该正确处理边界年龄数据\n\n    expect(received).toBeTruthy()\n\n    Received: false\n\n      247 |     test('应该正确处理边界年龄数据', async () => {\n      248 |       const result = await enhancedUserConfigManager.addBasicConfig(TEST_CONFIGS.edgeCases.minAge);\n    > 249 |       expect(result).toBeTruthy();\n          |                      ^\n      250 |\n      251 |       const configs = enhancedUserConfigManager.getAllConfigs();\n      252 |       const config = configs[configs.length - 1];\n\n      at Object.<anonymous> (__tests__/config.test.js:249:22)\n\nTest Suites: 1 failed, 1 total\nTests:       3 failed, 9 passed, 12 total\nSnapshots:   0 total\nTime:        1.263 s, estimated 2 s\nRan all test suites matching /.\\/__tests__\\/config.test.js/i.\nTest results written to: test/results/用户配置数据测试.json\n",
        "timestamp": "2025-12-25T08:24:47.878Z"
      },
      {
        "testName": "数据一致性测试",
        "error": "Command failed: npx jest ./__tests__/consistency.test.js --config=./test/jest.config.js --verbose --json --outputFile=./test/results/数据一致性测试.json\nFAIL test/__tests__/consistency.test.js\n  配置数据一致性测试套件\n    数据完整性验证\n      ✓ 应该验证完整配置数据的完整性 (10 ms)\n      ✓ 应该检测部分配置数据的问题 (2 ms)\n      ✓ 应该拒绝损坏的配置数据 (1 ms)\n    配置数据一致性检查\n      ✕ 保存和读取的配置数据应该一致 (3 ms)\n      ✕ 修改配置后相关字段应该同步更新 (11 ms)\n    错误恢复和容错机制\n      ✓ 应该自动修复部分损坏的数据 (12 ms)\n      ✓ 应该处理缺失字段的默认值填充 (1 ms)\n    数据完整性管理器测试\n      ✕ 应该检测配置数据的完整性 (1 ms)\n      ✕ 应该自动修复不完整的数据 (4 ms)\n    并发操作测试\n      ✓ 应该正确处理并发配置修改 (122 ms)\n    数据版本兼容性测试\n      ✓ 应该处理旧版本配置数据格式 (1 ms)\n\n  ● 配置数据一致性测试套件 › 配置数据一致性检查 › 保存和读取的配置数据应该一致\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"完整配置测试\"\n    Received: \"叉子\"\n\n      150 |       \n      151 |       // 验证数据一致性\n    > 152 |       expect(savedConfig.nickname).toBe(TEST_CONFIGS.complete.nickname);\n          |                                    ^\n      153 |       expect(savedConfig.birthDate).toBe(TEST_CONFIGS.complete.birthDate);\n      154 |       expect(savedConfig.birthTime).toBe(TEST_CONFIGS.complete.birthTime);\n      155 |       \n\n      at Object.<anonymous> (__tests__/consistency.test.js:152:36)\n\n  ● 配置数据一致性测试套件 › 配置数据一致性检查 › 修改配置后相关字段应该同步更新\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"完整配置测试\"\n    Received: \"叉子\"\n\n      191 |       \n      192 |       // 验证其他字段保持不变\n    > 193 |       expect(modifiedConfig.nickname).toBe(TEST_CONFIGS.complete.nickname);\n          |                                       ^\n      194 |       expect(modifiedConfig.gender).toBe(TEST_CONFIGS.complete.gender);\n      195 |     });\n      196 |   });\n\n      at Object.<anonymous> (__tests__/consistency.test.js:193:39)\n\n  ● 配置数据一致性测试套件 › 数据完整性管理器测试 › 应该检测配置数据的完整性\n\n    TypeError: birthDataIntegrityManager.checkDataIntegrity is not a function\n\n      243 |   describe('数据完整性管理器测试', () => {\n      244 |     test('应该检测配置数据的完整性', () => {\n    > 245 |       const completeCheck = birthDataIntegrityManager.checkDataIntegrity(TEST_CONFIGS.complete);\n          |                                                       ^\n      246 |       expect(completeCheck.isComplete).toBe(true);\n      247 |       expect(completeCheck.missingFields).toHaveLength(0);\n      248 |\n\n      at Object.<anonymous> (__tests__/consistency.test.js:245:55)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 配置数据一致性测试套件 › 数据完整性管理器测试 › 应该自动修复不完整的数据\n\n    TypeError: birthDataIntegrityManager.autoFixMissingData is not a function\n\n      253 |\n      254 |     test('应该自动修复不完整的数据', () => {\n    > 255 |       const fixedConfig = birthDataIntegrityManager.autoFixMissingData(TEST_CONFIGS.partial);\n          |                                                     ^\n      256 |       \n      257 |       expect(fixedConfig.birthLocation).toBeDefined();\n      258 |       expect(fixedConfig.birthLocation.lng).toBeDefined();\n\n      at Object.<anonymous> (__tests__/consistency.test.js:255:53)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\nTest Suites: 1 failed, 1 total\nTests:       4 failed, 7 passed, 11 total\nSnapshots:   0 total\nTime:        1.006 s, estimated 2 s\nRan all test suites matching /.\\/__tests__\\/consistency.test.js/i.\nTest results written to: test/results/数据一致性测试.json\n",
        "timestamp": "2025-12-25T08:24:51.190Z"
      },
      {
        "testName": "八字运算算法测试",
        "error": "Command failed: npx jest ./__tests__/bazi.test.js --config=./test/jest.config.js --verbose --json --outputFile=./test/results/八字运算算法测试.json\nFAIL test/__tests__/bazi.test.js\n  八字运算算法测试套件\n    八字算法准确性验证\n      ✓ 应该准确计算八字: 1990年1月1日12:30北京 (9 ms)\n      ✓ 应该准确计算八字: 1985年5月15日8:45上海 (5 ms)\n      ✕ 应该准确计算八字: 2000年2月29日0:00广州 (12 ms)\n      ✕ 应该正确处理不同经度的真太阳时 (4 ms)\n    时辰计算准确性验证\n      ✕ 应该正确计算时辰: 23:00 -> 子\n      ✕ 应该正确计算时辰: 01:30 -> 丑\n      ✕ 应该正确计算时辰: 03:45 -> 寅 (1 ms)\n      ✕ 应该正确计算时辰: 05:15 -> 卯\n      ✕ 应该正确计算时辰: 07:30 -> 辰\n      ✕ 应该正确计算时辰: 09:45 -> 巳\n      ✕ 应该正确计算时辰: 11:15 -> 午\n      ✕ 应该正确计算时辰: 13:30 -> 未\n      ✕ 应该正确计算时辰: 15:45 -> 申\n      ✕ 应该正确计算时辰: 17:15 -> 酉\n      ✕ 应该正确计算时辰: 19:30 -> 戌\n      ✕ 应该正确计算时辰: 21:45 -> 亥 (1 ms)\n      ✕ 简化版时辰计算应该与完整版一致\n      ✕ 时辰标准化应该正确处理边界值\n    五行分析准确性验证\n      ✓ 应该正确统计五行数量 (1 ms)\n      ✓ 应该正确分析日主和旺衰 (1 ms)\n    边界条件和异常输入处理\n      ✕ 应该处理无效日期输入 (10 ms)\n      ✕ 应该处理无效时间输入\n      ✓ 应该处理极端经度值 (23 ms)\n    性能测试\n      ✓ 八字计算应该在合理时间内完成 (11 ms)\n      ✓ 时辰计算应该高效 (1 ms)\n    农历和节气验证\n      ✕ 应该正确计算农历日期 (2 ms)\n      ✓ 应该正确处理闰月 (2 ms)\n    纳音五行验证\n      ✕ 应该正确计算纳音五行 (4 ms)\n\n  ● 八字运算算法测试套件 › 八字算法准确性验证 › 应该准确计算八字: 2000年2月29日0:00广州\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"丁巳\"\n    Received: \"丙辰\"\n\n      130 |         expect(baziInfo.bazi.year).toBe(testCase.expected.bazi.year);\n      131 |         expect(baziInfo.bazi.month).toBe(testCase.expected.bazi.month);\n    > 132 |         expect(baziInfo.bazi.day).toBe(testCase.expected.bazi.day);\n          |                                   ^\n      133 |         expect(baziInfo.bazi.hour).toBe(testCase.expected.bazi.hour);\n      134 |\n      135 |         // 验证五行准确性\n\n      at Object.<anonymous> (__tests__/bazi.test.js:132:35)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 八字算法准确性验证 › 应该正确处理不同经度的真太阳时\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"午\"\n    Received: undefined\n\n      152 |       testCases.forEach(({ longitude, birthTime, expectedHour }) => {\n      153 |         const baziInfo = calculateDetailedBazi('1990-01-01', birthTime, longitude);\n    > 154 |         expect(baziInfo.shichen.name).toBe(expectedHour);\n          |                                       ^\n      155 |       });\n      156 |     });\n      157 |   });\n\n      at forEach (__tests__/bazi.test.js:154:39)\n          at Array.forEach (<anonymous>)\n      at Object.<anonymous> (__tests__/bazi.test.js:152:17)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 时辰计算准确性验证 › 应该正确计算时辰: 23:00 -> 子\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"子\"\n    Received: undefined\n\n      164 |         \n      165 |         expect(shichen).toBeDefined();\n    > 166 |         expect(shichen.name).toBe(testCase.expected);\n          |                              ^\n      167 |         expect(shichen.index).toBe(testCase.expectedIndex);\n      168 |         expect(shichen.startTime).toBeDefined();\n      169 |         expect(shichen.endTime).toBeDefined();\n\n      at Object.<anonymous> (__tests__/bazi.test.js:166:30)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 时辰计算准确性验证 › 应该正确计算时辰: 01:30 -> 丑\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"丑\"\n    Received: undefined\n\n      164 |         \n      165 |         expect(shichen).toBeDefined();\n    > 166 |         expect(shichen.name).toBe(testCase.expected);\n          |                              ^\n      167 |         expect(shichen.index).toBe(testCase.expectedIndex);\n      168 |         expect(shichen.startTime).toBeDefined();\n      169 |         expect(shichen.endTime).toBeDefined();\n\n      at Object.<anonymous> (__tests__/bazi.test.js:166:30)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 时辰计算准确性验证 › 应该正确计算时辰: 03:45 -> 寅\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"寅\"\n    Received: undefined\n\n      164 |         \n      165 |         expect(shichen).toBeDefined();\n    > 166 |         expect(shichen.name).toBe(testCase.expected);\n          |                              ^\n      167 |         expect(shichen.index).toBe(testCase.expectedIndex);\n      168 |         expect(shichen.startTime).toBeDefined();\n      169 |         expect(shichen.endTime).toBeDefined();\n\n      at Object.<anonymous> (__tests__/bazi.test.js:166:30)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 时辰计算准确性验证 › 应该正确计算时辰: 05:15 -> 卯\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"卯\"\n    Received: undefined\n\n      164 |         \n      165 |         expect(shichen).toBeDefined();\n    > 166 |         expect(shichen.name).toBe(testCase.expected);\n          |                              ^\n      167 |         expect(shichen.index).toBe(testCase.expectedIndex);\n      168 |         expect(shichen.startTime).toBeDefined();\n      169 |         expect(shichen.endTime).toBeDefined();\n\n      at Object.<anonymous> (__tests__/bazi.test.js:166:30)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 时辰计算准确性验证 › 应该正确计算时辰: 07:30 -> 辰\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"辰\"\n    Received: undefined\n\n      164 |         \n      165 |         expect(shichen).toBeDefined();\n    > 166 |         expect(shichen.name).toBe(testCase.expected);\n          |                              ^\n      167 |         expect(shichen.index).toBe(testCase.expectedIndex);\n      168 |         expect(shichen.startTime).toBeDefined();\n      169 |         expect(shichen.endTime).toBeDefined();\n\n      at Object.<anonymous> (__tests__/bazi.test.js:166:30)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 时辰计算准确性验证 › 应该正确计算时辰: 09:45 -> 巳\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"巳\"\n    Received: undefined\n\n      164 |         \n      165 |         expect(shichen).toBeDefined();\n    > 166 |         expect(shichen.name).toBe(testCase.expected);\n          |                              ^\n      167 |         expect(shichen.index).toBe(testCase.expectedIndex);\n      168 |         expect(shichen.startTime).toBeDefined();\n      169 |         expect(shichen.endTime).toBeDefined();\n\n      at Object.<anonymous> (__tests__/bazi.test.js:166:30)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 时辰计算准确性验证 › 应该正确计算时辰: 11:15 -> 午\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"午\"\n    Received: undefined\n\n      164 |         \n      165 |         expect(shichen).toBeDefined();\n    > 166 |         expect(shichen.name).toBe(testCase.expected);\n          |                              ^\n      167 |         expect(shichen.index).toBe(testCase.expectedIndex);\n      168 |         expect(shichen.startTime).toBeDefined();\n      169 |         expect(shichen.endTime).toBeDefined();\n\n      at Object.<anonymous> (__tests__/bazi.test.js:166:30)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 时辰计算准确性验证 › 应该正确计算时辰: 13:30 -> 未\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"未\"\n    Received: undefined\n\n      164 |         \n      165 |         expect(shichen).toBeDefined();\n    > 166 |         expect(shichen.name).toBe(testCase.expected);\n          |                              ^\n      167 |         expect(shichen.index).toBe(testCase.expectedIndex);\n      168 |         expect(shichen.startTime).toBeDefined();\n      169 |         expect(shichen.endTime).toBeDefined();\n\n      at Object.<anonymous> (__tests__/bazi.test.js:166:30)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 时辰计算准确性验证 › 应该正确计算时辰: 15:45 -> 申\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"申\"\n    Received: undefined\n\n      164 |         \n      165 |         expect(shichen).toBeDefined();\n    > 166 |         expect(shichen.name).toBe(testCase.expected);\n          |                              ^\n      167 |         expect(shichen.index).toBe(testCase.expectedIndex);\n      168 |         expect(shichen.startTime).toBeDefined();\n      169 |         expect(shichen.endTime).toBeDefined();\n\n      at Object.<anonymous> (__tests__/bazi.test.js:166:30)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 时辰计算准确性验证 › 应该正确计算时辰: 17:15 -> 酉\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"酉\"\n    Received: undefined\n\n      164 |         \n      165 |         expect(shichen).toBeDefined();\n    > 166 |         expect(shichen.name).toBe(testCase.expected);\n          |                              ^\n      167 |         expect(shichen.index).toBe(testCase.expectedIndex);\n      168 |         expect(shichen.startTime).toBeDefined();\n      169 |         expect(shichen.endTime).toBeDefined();\n\n      at Object.<anonymous> (__tests__/bazi.test.js:166:30)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 时辰计算准确性验证 › 应该正确计算时辰: 19:30 -> 戌\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"戌\"\n    Received: undefined\n\n      164 |         \n      165 |         expect(shichen).toBeDefined();\n    > 166 |         expect(shichen.name).toBe(testCase.expected);\n          |                              ^\n      167 |         expect(shichen.index).toBe(testCase.expectedIndex);\n      168 |         expect(shichen.startTime).toBeDefined();\n      169 |         expect(shichen.endTime).toBeDefined();\n\n      at Object.<anonymous> (__tests__/bazi.test.js:166:30)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 时辰计算准确性验证 › 应该正确计算时辰: 21:45 -> 亥\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"亥\"\n    Received: undefined\n\n      164 |         \n      165 |         expect(shichen).toBeDefined();\n    > 166 |         expect(shichen.name).toBe(testCase.expected);\n          |                              ^\n      167 |         expect(shichen.index).toBe(testCase.expectedIndex);\n      168 |         expect(shichen.startTime).toBeDefined();\n      169 |         expect(shichen.endTime).toBeDefined();\n\n      at Object.<anonymous> (__tests__/bazi.test.js:166:30)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 时辰计算准确性验证 › 简化版时辰计算应该与完整版一致\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"子\"\n    Received: \"子时\"\n\n      176 |         const simpleShichen = getShichenSimple(testCase.time);\n      177 |         \n    > 178 |         expect(simpleShichen).toBe(testCase.expected);\n          |                               ^\n      179 |         expect(simpleShichen).toBe(fullShichen.name);\n      180 |       });\n      181 |     });\n\n      at forEach (__tests__/bazi.test.js:178:31)\n          at Array.forEach (<anonymous>)\n      at Object.<anonymous> (__tests__/bazi.test.js:174:26)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 时辰计算准确性验证 › 时辰标准化应该正确处理边界值\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"午\"\n    Received: \"午时\"\n\n      191 |       edgeCases.forEach(({ input, expected }) => {\n      192 |         const normalized = normalizeShichen(input);\n    > 193 |         expect(normalized).toBe(expected);\n          |                            ^\n      194 |       });\n      195 |     });\n      196 |   });\n\n      at forEach (__tests__/bazi.test.js:193:28)\n          at Array.forEach (<anonymous>)\n      at Object.<anonymous> (__tests__/bazi.test.js:191:17)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 边界条件和异常输入处理 › 应该处理无效日期输入\n\n    expect(received).toThrow()\n\n    Received function did not throw\n\n      250 |         expect(() => {\n      251 |           calculateDetailedBazi(date, '12:30', 116.40);\n    > 252 |         }).toThrow(); // 或者返回合理的默认值\n          |            ^\n      253 |       });\n      254 |     });\n      255 |\n\n      at forEach (__tests__/bazi.test.js:252:12)\n          at Array.forEach (<anonymous>)\n      at Object.<anonymous> (__tests__/bazi.test.js:249:20)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 边界条件和异常输入处理 › 应该处理无效时间输入\n\n    wrong hour 25\n\n      20 |\n      21 |     // 1. 创建公历对象\n    > 22 |     const solar = Solar.fromYmdHms(year, month, day, hour, minute, 0);\n         |                         ^\n      23 |\n      24 |     // 2. 转换为农历对象 (lunar-javascript 会自动处理节气等八字计算)\n      25 |     let lunar = solar.getLunar();\n\n      at _fromYmdHms (../node_modules/lunar-javascript/lunar.js:106:15)\n      at Object.fromYmdHms (../node_modules/lunar-javascript/lunar.js:624:60)\n      at calculateDetailedBazi (../src/utils/baziHelper.js:22:25)\n      at forEach (__tests__/bazi.test.js:260:26)\n          at Array.forEach (<anonymous>)\n      at Object.<anonymous> (__tests__/bazi.test.js:259:20)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 农历和节气验证 › 应该正确计算农历日期\n\n    expect(received).toBeDefined()\n\n    Received: undefined\n\n      322 |       \n      323 |       // 验证农历日期结构\n    > 324 |       expect(baziInfo.lunar.year).toBeDefined();\n          |                                   ^\n      325 |       expect(baziInfo.lunar.month).toBeDefined();\n      326 |       expect(baziInfo.lunar.day).toBeDefined();\n      327 |       expect(baziInfo.lunar.isLeapMonth).toBeDefined();\n\n      at Object.<anonymous> (__tests__/bazi.test.js:324:35)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 八字运算算法测试套件 › 纳音五行验证 › 应该正确计算纳音五行\n\n    expect(received).toMatch(expected)\n\n    Expected pattern: /[木火土金水]\\w+/\n    Received string:  \"大林木\"\n\n      350 |       \n      351 |       expect(baziInfo.nayin).toBeDefined();\n    > 352 |       expect(baziInfo.nayin.year).toMatch(/[木火土金水]\\w+/);\n          |                                   ^\n      353 |       expect(baziInfo.nayin.month).toMatch(/[木火土金水]\\w+/);\n      354 |       expect(baziInfo.nayin.day).toMatch(/[木火土金水]\\w+/);\n      355 |       expect(baziInfo.nayin.hour).toMatch(/[木火土金水]\\w+/);\n\n      at Object.<anonymous> (__tests__/bazi.test.js:352:35)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\nTest Suites: 1 failed, 1 total\nTests:       20 failed, 8 passed, 28 total\nSnapshots:   0 total\nTime:        0.881 s, estimated 1 s\nRan all test suites matching /.\\/__tests__\\/bazi.test.js/i.\nTest results written to: test/results/八字运算算法测试.json\n",
        "timestamp": "2025-12-25T08:24:54.521Z"
      },
      {
        "testName": "边界条件测试",
        "error": "Command failed: npx jest ./__tests__/edge-cases.test.js --config=./test/jest.config.js --verbose --json --outputFile=./test/results/边界条件测试.json\nFAIL test/__tests__/edge-cases.test.js\n  边界条件和异常输入测试套件\n    极端日期和时间处理\n      ✕ 应该处理极早和极晚的日期 (10 ms)\n      ✕ 应该正确处理闰年日期 (1 ms)\n      ✓ 应该拒绝明显无效的日期 (2 ms)\n      ✕ 应该处理边界时间值 (1 ms)\n    极端地理位置处理\n      ✕ 应该处理极地坐标 (1 ms)\n      ✓ 应该处理超出范围的坐标 (1 ms)\n    特殊姓名处理\n      ✕ 应该处理极端长度的姓名\n      ✕ 应该处理特殊字符和表情符号\n    错误恢复和容错机制\n      ✕ 应该正确处理部分缺失数据 (1 ms)\n      ✕ 应该正确处理格式错误数据 (5 ms)\n      ✕ 应该正确处理空数据 (1 ms)\n      ✕ 应该正确处理null数据 (1 ms)\n      ✕ 应该正确处理数据完整性检查 (1 ms)\n      ✕ 应该正确自动修复数据 (1 ms)\n    并发操作测试\n      ✕ 应该正确处理并发配置添加 (2 ms)\n      ✓ 应该正确处理并发配置修改 (148 ms)\n    性能压力测试\n      ✓ 应该处理大量八字计算 (107 ms)\n      ✓ 应该处理大量时辰计算 (6 ms)\n    内存和资源管理\n      ✓ 应该正确处理大量配置存储 (2 ms)\n      ✕ 应该正确清理临时数据 (1 ms)\n\n  ● 边界条件和异常输入测试套件 › 极端日期和时间处理 › 应该处理极早和极晚的日期\n\n    expect(received).toBeTruthy()\n\n    Received: false\n\n      134 |       });\n      135 |       \n    > 136 |       expect(earlyResult).toBeTruthy();\n          |                           ^\n      137 |\n      138 |       // 测试极晚日期\n      139 |       const lateResult = await enhancedUserConfigManager.addBasicConfig({\n\n      at Object.<anonymous> (__tests__/edge-cases.test.js:136:27)\n\n  ● 边界条件和异常输入测试套件 › 极端日期和时间处理 › 应该正确处理闰年日期\n\n    expect(received).toBeTruthy()\n\n    Received: false\n\n      155 |       });\n      156 |       \n    > 157 |       expect(result).toBeTruthy();\n          |                      ^\n      158 |     });\n      159 |\n      160 |     test('应该拒绝明显无效的日期', async () => {\n\n      at Object.<anonymous> (__tests__/edge-cases.test.js:157:22)\n\n  ● 边界条件和异常输入测试套件 › 极端日期和时间处理 › 应该处理边界时间值\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"子\"\n    Received: undefined\n\n      187 |       boundaryTimes.forEach(({ time, expectedShichen }) => {\n      188 |         const shichen = getShichen(time);\n    > 189 |         expect(shichen.name).toBe(expectedShichen);\n          |                              ^\n      190 |       });\n      191 |     });\n      192 |   });\n\n      at forEach (__tests__/edge-cases.test.js:189:30)\n          at Array.forEach (<anonymous>)\n      at Object.<anonymous> (__tests__/edge-cases.test.js:187:21)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 边界条件和异常输入测试套件 › 极端地理位置处理 › 应该处理极地坐标\n\n    expect(received).toBeTruthy()\n\n    Received: false\n\n      205 |         });\n      206 |         \n    > 207 |         expect(result).toBeTruthy();\n          |                        ^\n      208 |       }\n      209 |     });\n      210 |\n\n      at Object.<anonymous> (__tests__/edge-cases.test.js:207:24)\n\n  ● 边界条件和异常输入测试套件 › 特殊姓名处理 › 应该处理极端长度的姓名\n\n    expect(received).toBeTruthy()\n\n    Received: false\n\n      247 |         });\n      248 |         \n    > 249 |         expect(result).toBeTruthy();\n          |                        ^\n      250 |         \n      251 |         // 验证姓名被正确保存\n      252 |         if (result) {\n\n      at Object.<anonymous> (__tests__/edge-cases.test.js:249:24)\n\n  ● 边界条件和异常输入测试套件 › 特殊姓名处理 › 应该处理特殊字符和表情符号\n\n    expect(received).toBeTruthy()\n\n    Received: false\n\n      276 |         });\n      277 |         \n    > 278 |         expect(result).toBeTruthy();\n          |                        ^\n      279 |       }\n      280 |     });\n      281 |   });\n\n      at Object.<anonymous> (__tests__/edge-cases.test.js:278:24)\n\n  ● 边界条件和异常输入测试套件 › 错误恢复和容错机制 › 应该正确处理部分缺失数据\n\n    expect(received).toBeTruthy()\n\n    Received: false\n\n      288 |         \n      289 |         if (testCase.shouldRecover) {\n    > 290 |           expect(result).toBeTruthy();\n          |                          ^\n      291 |           \n      292 |           // 验证数据被正确恢复\n      293 |           const configs = enhancedUserConfigManager.getAllConfigs();\n\n      at Object.<anonymous> (__tests__/edge-cases.test.js:290:26)\n\n  ● 边界条件和异常输入测试套件 › 错误恢复和容错机制 › 应该正确处理格式错误数据\n\n    expect(received).toBeTruthy()\n\n    Received: false\n\n      288 |         \n      289 |         if (testCase.shouldRecover) {\n    > 290 |           expect(result).toBeTruthy();\n          |                          ^\n      291 |           \n      292 |           // 验证数据被正确恢复\n      293 |           const configs = enhancedUserConfigManager.getAllConfigs();\n\n      at Object.<anonymous> (__tests__/edge-cases.test.js:290:26)\n\n  ● 边界条件和异常输入测试套件 › 错误恢复和容错机制 › 应该正确处理空数据\n\n    expect(received).toBeTruthy()\n\n    Received: false\n\n      288 |         \n      289 |         if (testCase.shouldRecover) {\n    > 290 |           expect(result).toBeTruthy();\n          |                          ^\n      291 |           \n      292 |           // 验证数据被正确恢复\n      293 |           const configs = enhancedUserConfigManager.getAllConfigs();\n\n      at Object.<anonymous> (__tests__/edge-cases.test.js:290:26)\n\n  ● 边界条件和异常输入测试套件 › 错误恢复和容错机制 › 应该正确处理null数据\n\n    expect(received).toBeTruthy()\n\n    Received: false\n\n      288 |         \n      289 |         if (testCase.shouldRecover) {\n    > 290 |           expect(result).toBeTruthy();\n          |                          ^\n      291 |           \n      292 |           // 验证数据被正确恢复\n      293 |           const configs = enhancedUserConfigManager.getAllConfigs();\n\n      at Object.<anonymous> (__tests__/edge-cases.test.js:290:26)\n\n  ● 边界条件和异常输入测试套件 › 错误恢复和容错机制 › 应该正确处理数据完整性检查\n\n    TypeError: birthDataIntegrityManager.checkDataIntegrity is not a function\n\n      309 |     test('应该正确处理数据完整性检查', () => {\n      310 |       ERROR_RECOVERY_CASES.forEach(testCase => {\n    > 311 |         const integrityCheck = birthDataIntegrityManager.checkDataIntegrity(testCase.config);\n          |                                                          ^\n      312 |         \n      313 |         // 验证完整性检查返回合理结果\n      314 |         expect(integrityCheck).toBeDefined();\n\n      at forEach (__tests__/edge-cases.test.js:311:58)\n          at Array.forEach (<anonymous>)\n      at Object.<anonymous> (__tests__/edge-cases.test.js:310:28)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 边界条件和异常输入测试套件 › 错误恢复和容错机制 › 应该正确自动修复数据\n\n    TypeError: birthDataIntegrityManager.autoFixMissingData is not a function\n\n      321 |     test('应该正确自动修复数据', () => {\n      322 |       ERROR_RECOVERY_CASES.forEach(testCase => {\n    > 323 |         const fixedConfig = birthDataIntegrityManager.autoFixMissingData(testCase.config);\n          |                                                       ^\n      324 |         \n      325 |         // 验证修复后的配置\n      326 |         expect(fixedConfig).toBeDefined();\n\n      at forEach (__tests__/edge-cases.test.js:323:55)\n          at Array.forEach (<anonymous>)\n      at Object.<anonymous> (__tests__/edge-cases.test.js:322:28)\n      at TestScheduler.scheduleTests (../node_modules/@jest/core/build/TestScheduler.js:333:13)\n      at runJest (../node_modules/@jest/core/build/runJest.js:404:19)\n      at _run10000 (../node_modules/@jest/core/build/cli/index.js:320:7)\n      at runCLI (../node_modules/@jest/core/build/cli/index.js:173:3)\n\n  ● 边界条件和异常输入测试套件 › 并发操作测试 › 应该正确处理并发配置添加\n\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 0\n    Received:   0\n\n      367 |       \n      368 |       // 至少应该有一些配置成功添加\n    > 369 |       expect(successful).toBeGreaterThan(0);\n          |                          ^\n      370 |     }, CONCURRENCY_TEST_CONFIG.timeout);\n      371 |\n      372 |     test('应该正确处理并发配置修改', async () => {\n\n      at Object.<anonymous> (__tests__/edge-cases.test.js:369:26)\n\n  ● 边界条件和异常输入测试套件 › 内存和资源管理 › 应该正确清理临时数据\n\n    无法删除配置：索引无效或只剩一个配置\n\n      674 |   async removeConfig(index) {\n      675 |     if (!this.initialized || index < 0 || index >= this.configs.length || this.configs.length <= 1) {\n    > 676 |       throw new Error('无法删除配置：索引无效或只剩一个配置');\n          |             ^\n      677 |     }\n      678 |     \n      679 |     try {\n\n      at EnhancedUserConfigManager.removeConfig (../src/utils/EnhancedUserConfigManager.js:676:13)\n      at Object.<anonymous> (__tests__/edge-cases.test.js:485:41)\n\nTest Suites: 1 failed, 1 total\nTests:       14 failed, 6 passed, 20 total\nSnapshots:   0 total\nTime:        1.071 s\nRan all test suites matching /.\\/__tests__\\/edge-cases.test.js/i.\nTest results written to: test/results/边界条件测试.json\n",
        "timestamp": "2025-12-25T08:24:57.810Z"
      }
    ]
  },
  "performanceAnalysis": [
    {
      "name": "八字计算性能",
      "count": 1,
      "min": "11.78ms",
      "max": "11.78ms",
      "average": "11.78ms",
      "median": "11.78ms",
      "trend": "稳定"
    },
    {
      "name": "时辰计算性能",
      "count": 1,
      "min": "100.64ms",
      "max": "100.64ms",
      "average": "100.64ms",
      "median": "100.64ms",
      "trend": "稳定"
    },
    {
      "name": "配置存储性能",
      "count": 1,
      "min": "6.33ms",
      "max": "6.33ms",
      "average": "6.33ms",
      "median": "6.33ms",
      "trend": "稳定"
    }
  ],
  "recommendations": [
    {
      "priority": "中",
      "category": "错误处理",
      "suggestion": "频繁出现 Command failed 错误，建议加强相关错误处理机制",
      "action": "improve_error_handling"
    }
  ],
  "timestamp": "2025-12-25T08:25:07.887Z"
}